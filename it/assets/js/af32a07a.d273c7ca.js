"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[843],{9613:(e,i,n)=>{n.d(i,{Zo:()=>c,kt:()=>m});var a=n(9496);function t(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}function o(e,i){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);i&&(a=a.filter((function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?o(Object(n),!0).forEach((function(i){t(e,i,n[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))}))}return e}function r(e,i){if(null==e)return{};var n,a,t=function(e,i){if(null==e)return{};var n,a,t={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],i.indexOf(n)>=0||(t[n]=e[n]);return t}(e,i);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],i.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}var p=a.createContext({}),s=function(e){var i=a.useContext(p),n=i;return e&&(n="function"==typeof e?e(i):l(l({},i),e)),n},c=function(e){var i=s(e.components);return a.createElement(p.Provider,{value:i},e.children)},d={inlineCode:"code",wrapper:function(e){var i=e.children;return a.createElement(a.Fragment,{},i)}},u=a.forwardRef((function(e,i){var n=e.components,t=e.mdxType,o=e.originalType,p=e.parentName,c=r(e,["components","mdxType","originalType","parentName"]),u=s(n),m=t,h=u["".concat(p,".").concat(m)]||u[m]||d[m]||o;return n?a.createElement(h,l(l({ref:i},c),{},{components:n})):a.createElement(h,l({ref:i},c))}));function m(e,i){var n=arguments,t=i&&i.mdxType;if("string"==typeof e||t){var o=n.length,l=new Array(o);l[0]=u;var r={};for(var p in i)hasOwnProperty.call(i,p)&&(r[p]=i[p]);r.originalType=e,r.mdxType="string"==typeof e?e:t,l[1]=r;for(var s=2;s<o;s++)l[s]=n[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},2653:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>p,default:()=>m,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var a=n(2962),t=n(2742),o=(n(9496),n(9613)),l=["components"],r={id:"faq",title:"Domande frequenti (FAQ)"},p=void 0,s={unversionedId:"faq",id:"faq",title:"Domande frequenti (FAQ)",description:"Perch\xe9 la mia cartella node_modules utilizza spazio su disco se i pacchetti sono salvati in un archivio globale?",source:"@site/i18n/it/docusaurus-plugin-content-docs/current/faq.md",sourceDirName:".",slug:"/faq",permalink:"/it/next/faq",draft:!1,editUrl:"https://crowdin.com/project/pnpm/it",tags:[],version:"current",frontMatter:{id:"faq",title:"Domande frequenti (FAQ)"}},c={},d=[{value:"Perch\xe9 la mia cartella <code>node_modules</code> utilizza spazio su disco se i pacchetti sono salvati in un archivio globale?",id:"perch\xe9-la-mia-cartella-node_modules-utilizza-spazio-su-disco-se-i-pacchetti-sono-salvati-in-un-archivio-globale",level:2},{value:"Funziona su Windows?",id:"funziona-su-windows",level:2},{value:"Ma l&#39;approccio annidato di <code>node_modules</code> \xe8 incompatibile con Windows?",id:"ma-lapproccio-annidato-di-node_modules-\xe8-incompatibile-con-windows",level:2},{value:"E i collegamenti simbolici circolari?",id:"e-i-collegamenti-simbolici-circolari",level:2},{value:"Perch\xe9 avere collegamenti fisici alla fine? Perch\xe9 non collegare simbolicamente direttamente all&#39;archivio globale?",id:"perch\xe9-avere-collegamenti-fisici-alla-fine-perch\xe9-non-collegare-simbolicamente-direttamente-allarchivio-globale",level:2},{value:"Pnpm funziona su pi\xf9 unit\xe0 o filesystem?",id:"pnpm-funziona-su-pi\xf9-unit\xe0-o-filesystem",level:2},{value:"Il percorso dell&#39;archivio \xe8 specificato",id:"il-percorso-dellarchivio-\xe8-specificato",level:3},{value:"Il percorso dell&#39;archivio NON \xe8 specificato",id:"il-percorso-dellarchivio-non-\xe8-specificato",level:3},{value:"Cosa significa <code>pnpm</code>?",id:"cosa-significa-pnpm",level:2},{value:"<code>pnpm</code> non funziona con &lt;IL TUO-PROGETTO-QUI&gt;?",id:"pnpm-non-funziona-con-il-tuo-progetto-qui",level:2},{value:"Soluzione 1",id:"soluzione-1",level:3},{value:"Soluzione 2",id:"soluzione-2",level:3},{value:"Soluzione 3",id:"soluzione-3",level:3}],u={toc:d};function m(e){var i=e.components,n=(0,t.Z)(e,l);return(0,o.kt)("wrapper",(0,a.Z)({},u,n,{components:i,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"perch\xe9-la-mia-cartella-node_modules-utilizza-spazio-su-disco-se-i-pacchetti-sono-salvati-in-un-archivio-globale"},"Perch\xe9 la mia cartella ",(0,o.kt)("inlineCode",{parentName:"h2"},"node_modules")," utilizza spazio su disco se i pacchetti sono salvati in un archivio globale?"),(0,o.kt)("p",null,"pnpm crea ",(0,o.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Hard_link"},'"collegamenti fisici"')," dall'archivio globale alla cartella ",(0,o.kt)("inlineCode",{parentName:"p"},"node_modules")," del progetto. I collegamenti fisici puntano allo stesso spazio sul disco dove si trovano i file originali. Quindi, ad esempio, se hai ",(0,o.kt)("inlineCode",{parentName:"p"},"foo")," nel tuo progetto come dipendenza e occupa 1 Mb di spazio, sembrer\xe0 che occupi 1 Mb di spazio nella cartella ",(0,o.kt)("inlineCode",{parentName:"p"},"node_modules")," del progetto e la stessa quantit\xe0 di spazio nell'archivio globale. Tuttavia, 1 Mb \xe8 ",(0,o.kt)("em",{parentName:"p"},"lo stesso spazio")," sul disco indirizzato da due posizioni diverse. Quindi in totale ",(0,o.kt)("inlineCode",{parentName:"p"},"foo")," occupa 1MB, non 2MB."),(0,o.kt)("p",null,"Per saperne di pi\xf9 su questo argomento:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://unix.stackexchange.com/questions/88423/why-do-hard-links-seem-to-take-the-same-space-as-the-originals"},"Perch\xe9 i collegamenti fisici sembrano occupare lo stesso spazio degli originali?")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://gist.github.com/zkochan/106cfef49f8476b753a9cbbf9c65aff1"},"Un thread dalla chat room di pnpm")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/pnpm/pnpm/issues/794"},"Un ticket nel repository di pnpm"))),(0,o.kt)("h2",{id:"funziona-su-windows"},"Funziona su Windows?"),(0,o.kt)("p",null,"Risposta breve: s\xec. Risposta lunga: Usare i collegamenti simbolici su Windows \xe8 a dir poco problematico, tuttavia, pnpm ha una soluzione alternativa. Per Windows, usiamo le ",(0,o.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/windows/win32/fileio/hard-links-and-junctions"},"giunzioni"),"."),(0,o.kt)("h2",{id:"ma-lapproccio-annidato-di-node_modules-\xe8-incompatibile-con-windows"},"Ma l'approccio annidato di ",(0,o.kt)("inlineCode",{parentName:"h2"},"node_modules")," \xe8 incompatibile con Windows?"),(0,o.kt)("p",null,"Le prime versioni di npm hanno avuto problemi a causa del annidamento di tutti i ",(0,o.kt)("inlineCode",{parentName:"p"},"node_modules")," (vedi ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/nodejs/node-v0.x-archive/issues/6960"},"questo ticket"),"). Tuttavia, pnpm non crea cartelle profonde, memorizza tutti i pacchetti pianamente e utilizza collegamenti simbolici per creare la struttura ad albero delle dipendenze."),(0,o.kt)("h2",{id:"e-i-collegamenti-simbolici-circolari"},"E i collegamenti simbolici circolari?"),(0,o.kt)("p",null,"Sebbene pnpm utilizzi il collegamento per inserire le dipendenze nella cartella ",(0,o.kt)("inlineCode",{parentName:"p"},"node_modules"),", collegamenti simbolici circolari vengono evitati perch\xe9 i pacchetti padre vengono inseriti nella stessa ",(0,o.kt)("inlineCode",{parentName:"p"},"node_modules")," in cui si trovano le loro dipendenze. Quindi le dipendenze di ",(0,o.kt)("inlineCode",{parentName:"p"},"foo")," non sono in ",(0,o.kt)("inlineCode",{parentName:"p"},"foo/node_modules"),", ma ",(0,o.kt)("inlineCode",{parentName:"p"},"foo")," \xe8 in ",(0,o.kt)("inlineCode",{parentName:"p"},"node_modules")," insieme alle sue dipendenze."),(0,o.kt)("h2",{id:"perch\xe9-avere-collegamenti-fisici-alla-fine-perch\xe9-non-collegare-simbolicamente-direttamente-allarchivio-globale"},"Perch\xe9 avere collegamenti fisici alla fine? Perch\xe9 non collegare simbolicamente direttamente all'archivio globale?"),(0,o.kt)("p",null,"Un pacchetto pu\xf2 avere diversi insiemi di dipendenze su una macchina."),(0,o.kt)("p",null,"Nel progetto ",(0,o.kt)("strong",{parentName:"p"},"A")," ",(0,o.kt)("inlineCode",{parentName:"p"},"foo@1.0.0")," pu\xf2 avere una dipendenza risolta in ",(0,o.kt)("inlineCode",{parentName:"p"},"bar@1.0.0"),", ma nel progetto ",(0,o.kt)("strong",{parentName:"p"},"B")," la stessa dipendenza di ",(0,o.kt)("inlineCode",{parentName:"p"},"foo")," potrebbe risolversi in ",(0,o.kt)("inlineCode",{parentName:"p"},"bar@1.1.0"),"; quindi, pnpm collega fisicamente ",(0,o.kt)("inlineCode",{parentName:"p"},"foo@1.0.0")," a ogni progetto in cui viene utilizzato, per creare diversi insiemi di dipendenze per esso."),(0,o.kt)("p",null,"Il collegamento simbolico diretto all'archivio globale funzionerebbe con il flag ",(0,o.kt)("inlineCode",{parentName:"p"},"--preserve-symlinks")," di Node, tuttavia, questo approccio ha una pletora dei suoi problemi, quindi abbiamo deciso di attenerci ai collegamenti fisici. Per maggiori dettagli sul perch\xe9 stata presa questa decisione, vedere ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/nodejs/node-eps/issues/46"},"questo ticket"),"."),(0,o.kt)("h2",{id:"pnpm-funziona-su-pi\xf9-unit\xe0-o-filesystem"},"Pnpm funziona su pi\xf9 unit\xe0 o filesystem?"),(0,o.kt)("p",null,"L'archivio dei pacchetti dovrebbe trovarsi sulla stessa unit\xe0 e filesystem delle installazioni, altrimenti i pacchetti verranno copiati, non collegati. Ci\xf2 \xe8 dovuto a una limitazione nel funzionamento del collegamento fisico, in quanto un file su un file system non pu\xf2 indirizzare una posizione in un altro. Vedi il ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/pnpm/pnpm/issues/712"},"ticket #712")," per maggiori dettagli."),(0,o.kt)("p",null,"pnpm funziona in modo diverso nei 2 casi seguenti:"),(0,o.kt)("h3",{id:"il-percorso-dellarchivio-\xe8-specificato"},"Il percorso dell'archivio \xe8 specificato"),(0,o.kt)("p",null,"Se il percorso dell'archivio \xe8 specificato tramite ",(0,o.kt)("a",{parentName:"p",href:"/it/next/configuring"},"la configurazione dell'archivio"),", la copia avviene tra l'archivio e tutti i progetti che si trovano su un disco diverso."),(0,o.kt)("p",null,"Se si esegue ",(0,o.kt)("inlineCode",{parentName:"p"},"pnpm install")," sul disco ",(0,o.kt)("inlineCode",{parentName:"p"},"A"),", l'archivio pnpm deve trovarsi sul disco ",(0,o.kt)("inlineCode",{parentName:"p"},"A"),". Se l'archivio pnpm si trova sul disco ",(0,o.kt)("inlineCode",{parentName:"p"},"B"),", tutti i pacchetti richiesti verranno copiati direttamente nella posizione del progetto invece di essere collegati. Questo inibisce gravemente i vantaggi di archiviazione e prestazioni di pnpm."),(0,o.kt)("h3",{id:"il-percorso-dellarchivio-non-\xe8-specificato"},"Il percorso dell'archivio NON \xe8 specificato"),(0,o.kt)("p",null,"Se il percorso dell'archivio non \xe8 impostato, vengono creati pi\xf9 archivi (uno per unit\xe0 o filesystem)."),(0,o.kt)("p",null,"Se l'installazione viene eseguita sul disco ",(0,o.kt)("inlineCode",{parentName:"p"},"A"),", l'archivio verr\xe0 creato su ",(0,o.kt)("inlineCode",{parentName:"p"},"A")," in ",(0,o.kt)("inlineCode",{parentName:"p"},".pnpm-store")," nella radice del filesystem.  Se in seguito l'installazione viene eseguita sul disco ",(0,o.kt)("inlineCode",{parentName:"p"},"B"),", verr\xe0 creato un archivio indipendente su ",(0,o.kt)("inlineCode",{parentName:"p"},"B")," in ",(0,o.kt)("inlineCode",{parentName:"p"},".pnpm-store"),". I progetti manterrebbero ancora i vantaggi di pnpm, ma ogni unit\xe0 potrebbe avere pacchetti ridondanti."),(0,o.kt)("h2",{id:"cosa-significa-pnpm"},"Cosa significa ",(0,o.kt)("inlineCode",{parentName:"h2"},"pnpm"),"?"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"pnpm")," significa ",(0,o.kt)("inlineCode",{parentName:"p"},"npm performante"),". ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/rstacruz/"},"@rstacruz")," ha inventato il nome."),(0,o.kt)("h2",{id:"pnpm-non-funziona-con-il-tuo-progetto-qui"},(0,o.kt)("inlineCode",{parentName:"h2"},"pnpm")," non funziona con ","<","IL TUO-PROGETTO-QUI>?"),(0,o.kt)("p",null,"Nella maggior parte dei casi significa che una delle dipendenze richiede pacchetti non dichiarati in ",(0,o.kt)("inlineCode",{parentName:"p"},"package.json"),". \xc8 un errore comune causato da una ",(0,o.kt)("inlineCode",{parentName:"p"},"node_modules")," piatta. Se ci\xf2 accade, si tratta di un errore nella dipendenza e dovrebbe essere corretta. Tuttavia, ci\xf2 potrebbe richiedere del tempo, quindi pnpm supporta soluzioni alternative per far funzionare i pacchetti difettosi."),(0,o.kt)("h3",{id:"soluzione-1"},"Soluzione 1"),(0,o.kt)("p",null,"In case there are issues, you can use the ",(0,o.kt)("a",{parentName:"p",href:"npmrc#node-linker"},(0,o.kt)("inlineCode",{parentName:"a"},"node-linker=hoisted"))," setting. This creates a flat ",(0,o.kt)("inlineCode",{parentName:"p"},"node_modules")," structure similar to the one created by ",(0,o.kt)("inlineCode",{parentName:"p"},"npm"),"."),(0,o.kt)("h3",{id:"soluzione-2"},"Soluzione 2"),(0,o.kt)("p",null,"In the following example, a dependency does ",(0,o.kt)("strong",{parentName:"p"},"not")," have the ",(0,o.kt)("inlineCode",{parentName:"p"},"iterall")," module in its own list of deps."),(0,o.kt)("p",null,"The easiest solution to resolve missing dependencies of the buggy packages is to ",(0,o.kt)("strong",{parentName:"p"},"add ",(0,o.kt)("inlineCode",{parentName:"strong"},"iterall")," as a dependency to our project's ",(0,o.kt)("inlineCode",{parentName:"strong"},"package.json")),"."),(0,o.kt)("p",null,"You can do so, by installing it via ",(0,o.kt)("inlineCode",{parentName:"p"},"pnpm add iterall"),", and will be automatically added to your project's ",(0,o.kt)("inlineCode",{parentName:"p"},"package.json"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'  "dependencies": {\n    ...\n    "iterall": "^1.2.2",\n    ...\n  }\n')),(0,o.kt)("h3",{id:"soluzione-3"},"Soluzione 3"),(0,o.kt)("p",null,"One of the solutions is to use ",(0,o.kt)("a",{parentName:"p",href:"/it/next/pnpmfile#hooks"},"hooks")," for adding the missing dependencies to the package's ",(0,o.kt)("inlineCode",{parentName:"p"},"package.json"),"."),(0,o.kt)("p",null,"An example was ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/pnpm/pnpm/issues/1043"},"Webpack Dashboard")," which wasn't working with ",(0,o.kt)("inlineCode",{parentName:"p"},"pnpm"),". It has since been resolved such that it works with ",(0,o.kt)("inlineCode",{parentName:"p"},"pnpm")," now."),(0,o.kt)("p",null,"It used to throw an error:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-console"},"Error: Cannot find module 'babel-traverse'\n  at /node_modules/inspectpack@2.2.3/node_modules/inspectpack/lib/actions/parse\n")),(0,o.kt)("p",null,"The problem was that ",(0,o.kt)("inlineCode",{parentName:"p"},"babel-traverse")," was used in ",(0,o.kt)("inlineCode",{parentName:"p"},"inspectpack")," which was used by ",(0,o.kt)("inlineCode",{parentName:"p"},"webpack-dashboard"),", but ",(0,o.kt)("inlineCode",{parentName:"p"},"babel-traverse")," wasn't specified in ",(0,o.kt)("inlineCode",{parentName:"p"},"inspectpack"),"'s ",(0,o.kt)("inlineCode",{parentName:"p"},"package.json"),". It still worked with ",(0,o.kt)("inlineCode",{parentName:"p"},"npm")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"yarn")," because they create flat ",(0,o.kt)("inlineCode",{parentName:"p"},"node_modules"),"."),(0,o.kt)("p",null,"The solution was to create a ",(0,o.kt)("inlineCode",{parentName:"p"},".pnpmfile.cjs")," with the following contents:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"module.exports = {\n  hooks: {\n    readPackage: (pkg) => {\n      if (pkg.name === \"inspectpack\") {\n        pkg.dependencies['babel-traverse'] = '^6.26.0';\n      }\n      return pkg;\n    }\n  }\n};\n")),(0,o.kt)("p",null,"After creating a ",(0,o.kt)("inlineCode",{parentName:"p"},".pnpmfile.cjs"),", delete ",(0,o.kt)("inlineCode",{parentName:"p"},"pnpm-lock.yaml")," only - there is no need to delete ",(0,o.kt)("inlineCode",{parentName:"p"},"node_modules"),", as pnpm hooks only affect module resolution. Then, rebuild the dependencies & it should be working."))}m.isMDXComponent=!0}}]);